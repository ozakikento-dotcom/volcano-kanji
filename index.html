<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>üåã Volcano Êº¢Â≠ó„ÉÅ„É£„É¨„É≥„Ç∏ÔºàÂ∞è1Ôºâüåã</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:"Hiragino Maru Gothic ProN","Arial Rounded MT Bold",Arial,sans-serif;
  background:linear-gradient(#cce7ff,#fff);
  text-align:center;
  padding:20px;
}
h1{font-size:2.2em;color:#ff5722}
#stats{font-size:1.2em;margin:6px}
#question{font-size:3.6em;margin:18px 0}

.okuri{
  font-size:0.45em;
  color:#777;
  margin-left:6px;
}

.choices{
  display:grid;
  grid-template-columns:repeat(3,minmax(120px,1fr));
  gap:18px;
  max-width:420px;
  margin:0 auto;
}
.choice{
  font-size:2em;
  padding:18px;
  border-radius:20px;
  border:none;
  background:#fff;
  box-shadow:0 4px 0 #ccc;
}
.choice:active{
  transform:translateY(4px);
  box-shadow:none;
}

#message{font-size:1.6em;height:1.6em;margin-top:10px}

#progressBox{max-width:420px;margin:14px auto}
.progress-bg-big{
  width:100%;height:28px;
  background:#eee;border-radius:18px;overflow:hidden;
}
.progress-bar-big{
  height:100%;width:0%;
  background:linear-gradient(90deg,#ffeb3b,#ff9800,#ff5722);
  transition:width .4s ease;
}

#stickerGrid{
  display:grid;
  grid-template-columns:repeat(3,160px);
  gap:16px;
  justify-content:center;
  margin-top:20px;
}
.sticker{
  width:160px;height:160px;
  background:#fff8e1;
  border-radius:24px;
  border:4px solid #ff9800;
  display:flex;align-items:center;justify-content:center;
}
.sticker img{width:150px;cursor:pointer}

#zoom{
  position:fixed;inset:0;
  background:rgba(0,0,0,.85);
  display:none;align-items:center;justify-content:center;
}
#zoom img{width:90vw;max-width:520px}

button{
  margin-top:16px;
  font-size:1em;
  padding:6px 16px;
  border-radius:12px;
  border:none;
}
</style>
</head>

<body>

<h1>üåã Volcano Êº¢Â≠ó„ÉÅ„É£„É¨„É≥„Ç∏ üåã</h1>

<div id="stats">Score: <b id="score">0</b> pt</div>

<div id="progressBox">
  <div class="progress-bg-big">
    <div class="progress-bar-big" id="progressBar"></div>
  </div>
  <div id="progressText">0 / 20 pt</div>
</div>

<div id="question">?</div>
<div class="choices" id="choices"></div>
<div id="message"></div>

<h2>üèÜ My Volcano Stickers</h2>
<div id="stickerGrid"></div>

<button onclick="resetGame()">Reset</button>

<div id="zoom" onclick="this.style.display='none'"><img></div>

<audio id="soundCorrect" src="Correct.m4a"></audio>
<audio id="soundIncorrect" src="Incorrect.m4a"></audio>

<script>
const SAVE_KEY="soma_volcano_kanji_g1";

/* === Â∞è1 Êº¢Â≠ó80Â≠óÔºàÂÆåÂÖ®Ê∫ñÊã†Ôºâ === */
const kanjiList = [
  {kanji:"‰∏Ä",yomi:"„ÅÑ„Å°"},{kanji:"‰∫å",yomi:"„Å´"},{kanji:"‰∏â",yomi:"„Åï„Çì"},
  {kanji:"Âõõ",yomi:"„Çà„Çì"},{kanji:"‰∫î",yomi:"„Åî"},{kanji:"ÂÖ≠",yomi:"„Çç„Åè"},
  {kanji:"‰∏É",yomi:"„Å™„Å™"},{kanji:"ÂÖ´",yomi:"„ÅØ„Å°"},{kanji:"‰πù",yomi:"„Åç„ÇÖ„ÅÜ"},
  {kanji:"ÂçÅ",yomi:"„Åò„ÇÖ„ÅÜ"},{kanji:"Áôæ",yomi:"„Å≤„ÇÉ„Åè"},{kanji:"ÂçÉ",yomi:"„Åõ„Çì"},

  {kanji:"‰∏ä",yomi:"„ÅÜ„Åà"},{kanji:"‰∏ã",yomi:"„Åó„Åü"},
  {kanji:"Â∑¶",yomi:"„Å≤„Å†„Çä"},{kanji:"Âè≥",yomi:"„Åø„Åé"},
  {kanji:"‰∏≠",yomi:"„Å™„Åã"},{kanji:"Â§ß",yomi:"„Åä„Åä"},
  {kanji:"Â∞è",yomi:"„Å°„ÅÑ"},

  {kanji:"Êúà",yomi:"„Å§„Åç"},{kanji:"Êó•",yomi:"„Å≤"},
  {kanji:"Âπ¥",yomi:"„Å®„Åó"},{kanji:"Êó©",yomi:"„ÅØ„ÇÑ"},
  {kanji:"Êú®",yomi:"„Åç"},{kanji:"Êûó",yomi:"„ÅØ„ÇÑ„Åó"},
  {kanji:"Â±±",yomi:"„ÇÑ„Åæ"},{kanji:"Â∑ù",yomi:"„Åã„Çè"},
  {kanji:"Âúü",yomi:"„Å§„Å°"},{kanji:"Á©∫",yomi:"„Åù„Çâ"},
  {kanji:"Â§©",yomi:"„Å¶„Çì"},
  {kanji:"Áîü",yomi:"„ÅÑ",okuri:"„ÅÑ„Åç„Çã"},
  {kanji:"Ëä±",yomi:"„ÅØ„Å™"},{kanji:"Ëçâ",yomi:"„Åè„Åï"},
  {kanji:"Ëô´",yomi:"„ÇÄ„Åó"},{kanji:"Áä¨",yomi:"„ÅÑ„Å¨"},

  {kanji:"‰∫∫",yomi:"„Å≤„Å®"},{kanji:"Âêç",yomi:"„Å™"},
  {kanji:"Â•≥",yomi:"„Åä„Çì„Å™"},{kanji:"Áî∑",yomi:"„Åä„Å®„Åì"},
  {kanji:"Â≠ê",yomi:"„Åì"},{kanji:"ÁõÆ",yomi:"„ÇÅ"},
  {kanji:"ËÄ≥",yomi:"„Åø„Åø"},{kanji:"Âè£",yomi:"„Åè„Å°"},
  {kanji:"Êâã",yomi:"„Å¶"},{kanji:"Ë∂≥",yomi:"„ÅÇ„Åó"},
  {kanji:"Âäõ",yomi:"„Å°„Åã„Çâ"},

  {kanji:"Èõ®",yomi:"„ÅÇ„ÇÅ"},{kanji:"Áü≥",yomi:"„ÅÑ„Åó"},
  {kanji:"Á´π",yomi:"„Åü„Åë"},{kanji:"Á≥∏",yomi:"„ÅÑ„Å®"},
  {kanji:"Ë≤ù",yomi:"„Åã„ÅÑ"},{kanji:"Ëªä",yomi:"„Åè„Çã„Åæ"},
  {kanji:"Èáë",yomi:"„Åã„Å≠"},{kanji:"Áéã",yomi:"„Åä„ÅÜ"},
  {kanji:"Áéâ",yomi:"„Åü„Åæ"},

  {kanji:"Â≠¶",yomi:"„Åå„Åè"},{kanji:"Ê†°",yomi:"„Åì„ÅÜ"},
  {kanji:"Êñá",yomi:"„Å∂„Çì"},{kanji:"Â≠ó",yomi:"„Åò"},
  {kanji:"Áî∞",yomi:"„Åü"},{kanji:"Ê∞¥",yomi:"„Åø„Åö"},
  {kanji:"ÁÅ´",yomi:"„Å≤"},
  {kanji:"ÂÖ•",yomi:"„ÅØ„ÅÑ",okuri:"„ÅØ„ÅÑ„Çã"},
  {kanji:"Âá∫",yomi:"„Åß",okuri:"„Åß„Çã"},
  {kanji:"Á´ã",yomi:"„Åü",okuri:"„Åü„Å§"},
  {kanji:"Ë¶ã",yomi:"„Åø",okuri:"„Åø„Çã"},
  {kanji:"‰ºë",yomi:"„ÇÑ„Åô",okuri:"„ÇÑ„Åô„ÇÄ"},
  {kanji:"ÂÖà",yomi:"„Åï„Åç"}
];

let score=0,current,mode;
let remainingStamps=[...Array(50)].map((_,i)=>`volst (${i+1}).png`);
remainingStamps.sort(()=>Math.random()-0.5);
let earnedStamps=[];

/* ÈÄÅ„Çä‰ªÆÂêç„ÅÆ„Äå„Å≤„Çâ„Åå„Å™ÈÉ®ÂàÜ„Å†„Åë„ÄçÂèñÂæó */
function getOkuriKana(){
  if(!current.okuri) return "";
  return current.okuri.replace(current.yomi,"");
}

/* Save / Load */
function saveGame(){
  localStorage.setItem(SAVE_KEY,JSON.stringify({score,remainingStamps,earnedStamps}));
}
function loadGame(){
  const d=JSON.parse(localStorage.getItem(SAVE_KEY)||"{}");
  score=d.score||0;
  remainingStamps=d.remainingStamps||remainingStamps;
  earnedStamps=d.earnedStamps||[];
  earnedStamps.forEach(addSticker);
}

/* Game */
function newQuestion(){
  current=kanjiList[Math.floor(Math.random()*kanjiList.length)];
  mode=Math.random()<0.5?"A":"B";

  if(mode==="A"){
    const okuriKana=getOkuriKana();
    question.innerHTML = okuriKana
      ? `${current.kanji}<span class="okuri">Ôºà${okuriKana}Ôºâ</span>`
      : current.kanji;
  }else{
    question.textContent = current.okuri || current.yomi;
  }
  generateChoices();
}

function generateChoices(){
  const answer = mode==="A"?current.yomi:current.kanji;
  const set=new Set([answer]);
  while(set.size<6){
    const r=kanjiList[Math.floor(Math.random()*kanjiList.length)];
    set.add(mode==="A"?r.yomi:r.kanji);
  }
  choices.innerHTML="";
  [...set].sort(()=>Math.random()-0.5).forEach(v=>{
    const b=document.createElement("button");
    b.className="choice";
    b.textContent=v;
    b.onclick=()=>check(v);
    choices.appendChild(b);
  });
}

function check(v){
  const ok = mode==="A"?v===current.yomi:v===current.kanji;
  if(ok){
    score+=2;
    soundCorrect.play();
    message.textContent="üî• „Åõ„ÅÑ„Åã„ÅÑÔºÅ";
  }else{
    score=Math.max(0,score-1);
    soundIncorrect.play();
    message.textContent="üôÇ „ÇÇ„ÅÜ„ÅÑ„Å°„Å©ÔºÅ";
  }
  scoreEl.textContent=score;
  updateProgress();
  while(score>=(earnedStamps.length+1)*20) giveSticker();
  saveGame();
  setTimeout(newQuestion,600);
}

/* Progress / Sticker */
function updateProgress(){
  const e=score%20;
  progressBar.style.width=(e/20*100)+"%";
  progressText.textContent=`${e} / 20 pt`;
}
function giveSticker(){
  if(!remainingStamps.length) return;
  const s=remainingStamps.shift();
  earnedStamps.push(s);
  addSticker(s);
}
function addSticker(src){
  const d=document.createElement("div");
  d.className="sticker";
  const i=document.createElement("img");
  i.src=src;
  i.onclick=()=>{zoom.style.display="flex";zoom.querySelector("img").src=src};
  d.appendChild(i);
  stickerGrid.appendChild(d);
}
function resetGame(){
  if(confirm("Reset?")){
    localStorage.removeItem(SAVE_KEY);
    location.reload();
  }
}

/* Init */
loadGame();
const scoreEl=document.getElementById("score");
scoreEl.textContent=score;
updateProgress();
newQuestion();
</script>

</body>
</html>
